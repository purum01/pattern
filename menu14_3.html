<link href="exam.css"   rel="stylesheet">
<script src="copy_button.js" ></script>

<!-- State.java -->
<div class="file-box">
    <h3 class="file-title">State.java</h3>
    <button class="copy-button" onclick="copyCode('code1')">복사하기</button>
    <pre class="code-box"><code id="code1">

public interface State {
    void doClock(Context context, int hour);
    void doUse(Context context);
    void doAlarm(Context context);
    void doPhone(Context context);
}
</code></pre>
</div>

<!-- Context.java -->
<div class="file-box">
  <h3 class="file-title">Context.java</h3>
  <button class="copy-button" onclick="copyCode('code2')">복사하기</button>
  <pre class="code-box"><code id="code2">
public interface Context {
	void setClock(int hour);
	void changeState(State state);
	void callSecurityCenter(String msg);
	void recordLog(String msg);
}
</code></pre>
</div>

<!-- DayState.java -->
<div class="file-box">
  <h3 class="file-title">DayState.java</h3>
  <button class="copy-button" onclick="copyCode('code3')">복사하기</button>
  <pre class="code-box"><code id="code3">
public class DayState implements State {
	private static DayState singleton = new DayState();

	private DayState() {
	}

	public static DayState getInstance() {
		return singleton;
	}

	@Override
	public void doClock(Context context, int hour) {
		if (hour < 9 || hour >= 17) {
			context.changeState(NightState.getInstance());
		}
	}

	@Override
	public void doUse(Context context) {
		context.recordLog("금고 사용 기록: 주간 중 사용");
	}

	@Override
	public void doAlarm(Context context) {
		context.callSecurityCenter("비상벨! 보안센터에 즉시 연결");
	}

	@Override
	public void doPhone(Context context) {
		context.callSecurityCenter("보안센터에 일반 통화 연결");
	}

	@Override
	public String toString() {
		return "[주간]";
	}
} 
</code></pre>
</div>

<!-- NightState.java -->
<div class="file-box">
  <h3 class="file-title">NightState.java</h3>
  <button class="copy-button" onclick="copyCode('code4')">복사하기</button>
  <pre class="code-box"><code id="code4">
public class NightState implements State {
	private static NightState singleton = new NightState();

	private NightState() {
	}

	public static NightState getInstance() {
		return singleton;
	}

	@Override
	public void doClock(Context context, int hour) {
		if (hour >= 9 && hour < 17) {
			context.changeState(DayState.getInstance());
		}
	}

	@Override
	public void doUse(Context context) {
		context.recordLog("경고: 야간에 금고 사용 - 비상 로그 기록");
	}

	@Override
	public void doAlarm(Context context) {
		context.callSecurityCenter("비상벨! 보안센터에 자동 호출");
	}

	@Override
	public void doPhone(Context context) {
		context.recordLog("야간 통화 시도 - 통화 내용 녹음 중");
	}

	@Override
	public String toString() {
		return "[야간]";
	}
}
</code></pre>
</div>

<!-- SafeFrame.java -->
<div class="file-box">
  <h3 class="file-title">SafeFrame.java</h3>
  <button class="copy-button" onclick="copyCode('code5')">복사하기</button>
  <pre class="code-box"><code id="code5">
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class SafeFrame extends JFrame implements ActionListener, Context {
	private JTextField textClock = new JTextField(60);
	private JTextArea textScreen = new JTextArea(10, 60);
	private JButton buttonUse = new JButton("금고사용");
	private JButton buttonAlarm = new JButton("비상벨");
	private JButton buttonPhone = new JButton("일반 통화");
	private JButton buttonExit = new JButton("종료");

	private State state = DayState.getInstance();

	public SafeFrame(String title) {
		super(title);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setBackground(Color.lightGray);
		setLayout(new BorderLayout());

		textClock.setEditable(false);
		add(textClock, BorderLayout.NORTH);

		textScreen.setEditable(false);
		add(new JScrollPane(textScreen), BorderLayout.CENTER);

		JPanel panel = new JPanel();
		panel.add(buttonUse);
		panel.add(buttonAlarm);
		panel.add(buttonPhone);
		panel.add(buttonExit);
		add(panel, BorderLayout.SOUTH);

		buttonUse.addActionListener(this);
		buttonAlarm.addActionListener(this);
		buttonPhone.addActionListener(this);
		buttonExit.addActionListener(this);

		pack();
		setLocationRelativeTo(null);
		setVisible(true);
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		if (e.getSource() == buttonUse) {
			state.doUse(this);
		} else if (e.getSource() == buttonAlarm) {
			state.doAlarm(this);
		} else if (e.getSource() == buttonPhone) {
			state.doPhone(this);
		} else if (e.getSource() == buttonExit) {
			System.exit(0);
		}
	}

	@Override
	public void setClock(int hour) {
		String clockString = String.format("현재 시각은 %02d:00", hour);
		System.out.println(clockString);
		textClock.setText(clockString);
		state.doClock(this, hour);
	}

	@Override
	public void changeState(State state) {
		this.state = state;
		recordLog("상태가 " + state.toString() + " 으로 변경되었습니다.");
	}

	@Override
	public void callSecurityCenter(String msg) {
		textScreen.append("call! " + msg + "\n");
	}

	@Override
	public void recordLog(String msg) {
		textScreen.append("record ... " + msg + "\n");
	}
}
</code></pre>
</div>

<!-- Main.java -->
<div class="file-box">
  <h3 class="file-title">Main.java</h3>
  <button class="copy-button" onclick="copyCode('code6')">복사하기</button>
  <pre class="code-box"><code id="code6">
public class Main {
	public static void main(String[] args) {
		SafeFrame frame = new SafeFrame("State Pattern 실습용");
		while (true) {
			for (int hour = 0; hour < 24; hour++) {
				frame.setClock(hour);
				try {
					Thread.sleep(1000);
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}
		}
	}
}
</code></pre>
</div>

